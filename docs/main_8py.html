<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Lab 0: src/main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Lab 0<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('main_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Micropython code for LAB0.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad617f32b75634347455deb6648251125" id="r_ad617f32b75634347455deb6648251125"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad617f32b75634347455deb6648251125">main.adc_timer_setup</a> (tim_num, frequency)</td></tr>
<tr class="memdesc:ad617f32b75634347455deb6648251125"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup for the ADC sampling timer.  <br /></td></tr>
<tr class="separator:ad617f32b75634347455deb6648251125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4131483a3a87f968265bf4c673ced9b" id="r_ae4131483a3a87f968265bf4c673ced9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4131483a3a87f968265bf4c673ced9b">main.square_timer_setup</a> (tim_num, frequency)</td></tr>
<tr class="memdesc:ae4131483a3a87f968265bf4c673ced9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup for the square wave generation timer.  <br /></td></tr>
<tr class="separator:ae4131483a3a87f968265bf4c673ced9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6059a82b6f14a8639a9053828b8539a2" id="r_a6059a82b6f14a8639a9053828b8539a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6059a82b6f14a8639a9053828b8539a2">main.adc_timer_irq</a> (tim_num)</td></tr>
<tr class="memdesc:a6059a82b6f14a8639a9053828b8539a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt callback function for sampling voltages.  <br /></td></tr>
<tr class="separator:a6059a82b6f14a8639a9053828b8539a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d7aacf885223b1f6babf1de2f495e9" id="r_a05d7aacf885223b1f6babf1de2f495e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05d7aacf885223b1f6babf1de2f495e9">main.square_timer_irq</a> (tim_num)</td></tr>
<tr class="memdesc:a05d7aacf885223b1f6babf1de2f495e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt callback function for setting pin states for square wave generation.  <br /></td></tr>
<tr class="separator:a05d7aacf885223b1f6babf1de2f495e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80becea021b7efec3dbe3812e5a40ce5" id="r_a80becea021b7efec3dbe3812e5a40ce5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a80becea021b7efec3dbe3812e5a40ce5">main.step_response</a> (pyb.Pin square_pin, pyb.ADC ADC_pin)</td></tr>
<tr class="memdesc:a80becea021b7efec3dbe3812e5a40ce5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forever loop to generate needed outputs.  <br /></td></tr>
<tr class="separator:a80becea021b7efec3dbe3812e5a40ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a858f5ff7af4d477edcabac66091978ec" id="r_a858f5ff7af4d477edcabac66091978ec"><td class="memItemLeft" align="right" valign="top"><a id="a858f5ff7af4d477edcabac66091978ec" name="a858f5ff7af4d477edcabac66091978ec"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.square_toggle</b> = 0</td></tr>
<tr class="separator:a858f5ff7af4d477edcabac66091978ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a266c965291c36d2254aa47c01a72bc45" id="r_a266c965291c36d2254aa47c01a72bc45"><td class="memItemLeft" align="right" valign="top"><a id="a266c965291c36d2254aa47c01a72bc45" name="a266c965291c36d2254aa47c01a72bc45"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.time_since_start</b> = 0</td></tr>
<tr class="separator:a266c965291c36d2254aa47c01a72bc45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3049adaad7104462d6785b4add4763a" id="r_af3049adaad7104462d6785b4add4763a"><td class="memItemLeft" align="right" valign="top"><a id="af3049adaad7104462d6785b4add4763a" name="af3049adaad7104462d6785b4add4763a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinC0_value</b> = 0</td></tr>
<tr class="separator:af3049adaad7104462d6785b4add4763a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f4a7200e405706e78b38f3c943d547" id="r_ac9f4a7200e405706e78b38f3c943d547"><td class="memItemLeft" align="right" valign="top"><a id="ac9f4a7200e405706e78b38f3c943d547" name="ac9f4a7200e405706e78b38f3c943d547"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>main.REF_VOLT</b> = 3.3</td></tr>
<tr class="separator:ac9f4a7200e405706e78b38f3c943d547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7244cddb4fb45ae4df9ab069ddf0fa34" id="r_a7244cddb4fb45ae4df9ab069ddf0fa34"><td class="memItemLeft" align="right" valign="top"><a id="a7244cddb4fb45ae4df9ab069ddf0fa34" name="a7244cddb4fb45ae4df9ab069ddf0fa34"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.MAX_ADC</b> = 4096</td></tr>
<tr class="separator:a7244cddb4fb45ae4df9ab069ddf0fa34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10759b03684746d5fdfd910b9731c0e0" id="r_a10759b03684746d5fdfd910b9731c0e0"><td class="memItemLeft" align="right" valign="top"><a id="a10759b03684746d5fdfd910b9731c0e0" name="a10759b03684746d5fdfd910b9731c0e0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.QUEUE_SIZE</b> = 10</td></tr>
<tr class="separator:a10759b03684746d5fdfd910b9731c0e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd606101eb3b1d7e354a16244715ca0" id="r_a4bd606101eb3b1d7e354a16244715ca0"><td class="memItemLeft" align="right" valign="top"><a id="a4bd606101eb3b1d7e354a16244715ca0" name="a4bd606101eb3b1d7e354a16244715ca0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.int_queue</b> = cqueue.IntQueue(QUEUE_SIZE)</td></tr>
<tr class="separator:a4bd606101eb3b1d7e354a16244715ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e20759df4d462d4c827ae60e6d070c1" id="r_a3e20759df4d462d4c827ae60e6d070c1"><td class="memItemLeft" align="right" valign="top"><a id="a3e20759df4d462d4c827ae60e6d070c1" name="a3e20759df4d462d4c827ae60e6d070c1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.adc0</b> = pyb.ADC(pyb.Pin.board.PC1)</td></tr>
<tr class="separator:a3e20759df4d462d4c827ae60e6d070c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9115bcf06008a23ec0eeb971fd9f50" id="r_a6a9115bcf06008a23ec0eeb971fd9f50"><td class="memItemLeft" align="right" valign="top"><a id="a6a9115bcf06008a23ec0eeb971fd9f50" name="a6a9115bcf06008a23ec0eeb971fd9f50"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinC0</b> = pyb.Pin(pyb.Pin.board.PC0, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a6a9115bcf06008a23ec0eeb971fd9f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Micropython code for LAB0. </p>
<p>LAB0 has two main functions, generating a square wave and reading measured voltages. The square wave is to occur at a frequency of 0.2Hz. The sampling of the voltages is to be in mV and done every 10ms. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6059a82b6f14a8639a9053828b8539a2" name="a6059a82b6f14a8639a9053828b8539a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6059a82b6f14a8639a9053828b8539a2">&#9670;&#160;</a></span>adc_timer_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.adc_timer_irq </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tim_num</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt callback function for sampling voltages. </p>
<p>This function is called by the ADC sampling timer and reads the ADC at a given time. This value is then added to the queue to be used outside of the callback function. </p>

</div>
</div>
<a id="ad617f32b75634347455deb6648251125" name="ad617f32b75634347455deb6648251125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad617f32b75634347455deb6648251125">&#9670;&#160;</a></span>adc_timer_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.adc_timer_setup </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tim_num</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>frequency</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup for the ADC sampling timer. </p>
<p>This function takes in a timer number and frequency, and performs the necessary setup functions to generate a timer. This timer is used to run the ADC voltage sampling function at a given frequency. </p>

</div>
</div>
<a id="a05d7aacf885223b1f6babf1de2f495e9" name="a05d7aacf885223b1f6babf1de2f495e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05d7aacf885223b1f6babf1de2f495e9">&#9670;&#160;</a></span>square_timer_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.square_timer_irq </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tim_num</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt callback function for setting pin states for square wave generation. </p>
<p>This function is called by the square wave generation timer sets a flag at a given rate. The flag is then used by the main loop to determine when it is time to toggle the pin that generates the square wave. </p>

</div>
</div>
<a id="ae4131483a3a87f968265bf4c673ced9b" name="ae4131483a3a87f968265bf4c673ced9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4131483a3a87f968265bf4c673ced9b">&#9670;&#160;</a></span>square_timer_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.square_timer_setup </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tim_num</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>frequency</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup for the square wave generation timer. </p>
<p>This function takes in a timer number and frequency, and performs the necessary setup functions to generate a timer. This timer is used to run the square wave generation flag function at a given frequency. </p>

</div>
</div>
<a id="a80becea021b7efec3dbe3812e5a40ce5" name="a80becea021b7efec3dbe3812e5a40ce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80becea021b7efec3dbe3812e5a40ce5">&#9670;&#160;</a></span>step_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.step_response </td>
          <td>(</td>
          <td class="paramtype">pyb.Pin</td>          <td class="paramname"><span class="paramname"><em>square_pin</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pyb.ADC</td>          <td class="paramname"><span class="paramname"><em>ADC_pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forever loop to generate needed outputs. </p>
<p>Reads flag from square wave timer to toggle pin state at the requested interval. Reads from adc data queue and converts to mV values to print over serial. Performs no functions between either of these tasks. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main_8py.html">main.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
